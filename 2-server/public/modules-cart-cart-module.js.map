{"version":3,"sources":["./src/app/modules/cart/cart-home/quantity/quantity.component.ts","./src/app/modules/cart/cart-home/quantity/quantity.component.html","./src/app/modules/cart/cart-home/cart-home.component.html","./src/app/modules/cart/cart-home/cart-home.component.ts","./src/app/modules/cart/cart.module.ts","./src/app/modules/cart/cart-routing.module.ts"],"names":[],"mappings":"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","file":"modules-cart-cart-module.js","sourcesContent":["import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\n\n@Component({\n  selector: 'app-quantity',\n  templateUrl: './quantity.component.html',\n  styleUrls: ['./quantity.component.css']\n})\nexport class QuantityComponent implements OnInit{\n  @Input() quantity: number;\n\n  @Output() onChange: EventEmitter<string> = new EventEmitter();\n  constructor() { }\n\n  ngOnInit(): void {}\n\n  increase(): boolean {\n    if (this.quantity === 10) { return false; }\n    this.quantity = this.quantity + 1;\n    this.onChange.emit('increase');\n  }\n\n  decrease(): boolean {\n    if (this.quantity === 1) { return false; }\n    this.quantity = this.quantity - 1;\n    this.onChange.emit('decrease');\n  }\n\n}\n","<mat-icon class=\"add noselect\" (click)=\"increase()\">add</mat-icon\n><input\n  class=\"noselect\"\n  type=\"number\"\n  [value]=\"quantity\"\n  min=\"1\"\n  max=\"10\"\n/><mat-icon class=\"remove noselect\" (click)=\"decrease()\">remove</mat-icon>\n","<div class=\"container\">\n  <h1 class=\"header\">Your cart</h1>\n  <table class=\"cart\">\n    <tr>\n      <th>Title</th>\n      <th>Price</th>\n      <th class=\"quantity\">Quantity</th>\n      <th></th>\n    </tr>\n    <tr *ngFor=\"let item of cart.data; let i = index\">\n      <ng-container *ngIf=\"item.product\">\n        <td>{{ item.product.title | shorten: 15 }}</td>\n        <td>$ {{ item.product.price }}</td>\n        <td class=\"quantity\">\n          <app-quantity\n            [quantity]=\"item.quantity\"\n            (onChange)=\"quantity($event, i)\"\n          ></app-quantity>\n        </td>\n        <td>\n          <mat-icon class=\"delete\" (click)=\"deleteBook(i)\">delete</mat-icon>\n        </td>\n      </ng-container>\n    </tr>\n  </table>\n  <div class=\"if-cart\" *ngIf=\"!cart.data[0].product\">\n    <p>You currently have no items in your shopping cart</p>\n  </div>\n  <div class=\"checkout\" *ngIf=\"cart.data[0].product\">\n    <p class=\"currency-text\">Total price:</p>\n    <p class=\"currency\">{{ totalPrice | currency }}</p>\n    <a routerLink=\"/checkout\" class=\"button button--checkout\">Checkout</a>\n  </div>\n</div>\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { CartService } from '../../../service/cart.service';\nimport { Cart } from '../../models/Cart';\n\n@Component({\n  selector: 'app-cart-home',\n  templateUrl: './cart-home.component.html',\n  styleUrls: ['./cart-home.component.css']\n})\nexport class CartHomeComponent implements OnInit, OnDestroy {\n  cart: Cart;\n  totalPrice = 0;\n  subscription: Subscription;\n  constructor(private cartService: CartService) { }\n\n  ngOnInit(): void {\n    this.getUserCart();\n    console.log(this.cart);\n  }\n\n  deleteBook(index: number): void {\n    this.cartService.deleteProductFromCart(index);\n  }\n\n  quantity(event: string, index: number): void {\n    if (event === 'increase') {\n      this.incOrDec(index, 'ADD');\n    } else if (event === 'decrease') {\n      this.incOrDec(index, 'SUBTRACTION');\n    }\n  }\n\n  private getUserCart(): void {\n    this.subscription = this.cartService.cartData$.subscribe(data => {\n        this.cart = data;\n        let price = 0;\n        this.cart.data.forEach(item => {\n          price = price + (Number(item.product?.price) * item.quantity);\n        });\n        this.totalPrice = price;\n    });\n  }\n\n  private incOrDec(index: number, operand: string): void {\n    if (operand === 'ADD') {\n      this.totalPrice = this.totalPrice + Number(this.cart.data[index].product.price);\n      this.cart.data[index].quantity++;\n    } else if (operand === 'SUBTRACTION') {\n      this.totalPrice = this.totalPrice - Number(this.cart.data[index].product.price);\n      this.cart.data[index].quantity--;\n    }\n    this.cartService.cartData$.next({ ...this.cart });\n    localStorage.setItem('cart', JSON.stringify(this.cart));\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatIconModule } from '@angular/material/icon';\nimport { FormsModule } from '@angular/forms';\nimport { SharedModule } from '../../shared/shared.module';\n\nimport { CartRoutingModule } from './cart-routing.module';\nimport { CartHomeComponent } from './cart-home/cart-home.component';\nimport { QuantityComponent } from './cart-home/quantity/quantity.component';\n\n@NgModule({\n  declarations: [CartHomeComponent, QuantityComponent],\n  imports: [\n    CommonModule,\n    CartRoutingModule,\n    MatIconModule,\n    FormsModule,\n    SharedModule\n  ]\n})\nexport class CartModule { }\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { CartHomeComponent } from './cart-home/cart-home.component';\n\nconst routes: Routes = [\n  { path: '', component: CartHomeComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class CartRoutingModule { }\n"],"sourceRoot":"webpack:///"}